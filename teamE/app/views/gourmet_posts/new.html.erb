<div class='container'>
  <%= form_with model: @post, url: gourmet_posts_path, local: true, class: 'mt-3'  do |form| %>
    <div class='mb-3'>
      <%= form.label :title, 'タイトル', class: 'd-block' %>
      <%= form.text_field :title, class: 'w-100 rounded' %>
    </div>
    <div class='mb-3'>
      <%= form.label :content, '説明', class: 'd-block' %>
      <%= form.text_area :content, class: 'w-100 rounded' %>
    </div>
    <div class='text-end'>
      <%= form.submit class: 'btn btn-primary' %>
    </div>
    <div class='mb-3'>
      <label class='border p-2 rounded', style='cursor: pointer;'>
        <%= image_tag 'parts/camera.svg' %>
        <span class="ml-5">画像を選択する</span>
        <%= form.file_field :pictures, multiple: true, onchange: 'previewImage(event)', style: "display:none;" %>
      </label>
    </div>
    <div id='preview' class="row" style="margin-left: 0; margin-right: 0;">
      <% if form.object.pictures.attached? %>
        <% form.object.pictures.each do |picture| %>
          <div class='col-md-4 p-1' style='margin-top: 10px; border: solid; border-color: rgb(255, 102, 51 ,0.33);'>
            <%= image_tag picture, style: 'width:100%;height: 400px;' %>
          </div>
        <% end %>
      <% else %>
        <div class='col-md-4' style='margin-top: 10px; border: solid; border-color: rgb(255, 102, 51 ,0.33);'>
          <%= image_tag '/no_image.jpeg', id: 'preview', style: 'width:100%;height: 400px;' %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<template id='preview-template'>
  <div class='col-md-4 p-1' style='margin-top: 10px; border: solid; border-color: rgb(255, 102, 51 ,0.33);'>
    <%= image_tag '/no_image.jpeg', style: 'width:100%;height: 400px;' %>
  </div>
</template>
